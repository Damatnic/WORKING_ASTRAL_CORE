# AstralCore Production Environment Configuration
# HIPAA-compliant production environment settings
# 
# SECURITY NOTICE: This file contains environment-specific configurations
# Actual secrets should be managed through secure secret management systems
# Never commit actual secrets to version control

# Environment Identification
NODE_ENV=production
ENVIRONMENT=production
DEPLOYMENT_STAGE=production

# Application Configuration
APP_NAME=AstralCore Mental Health Platform
APP_VERSION=${APP_VERSION:-latest}
APP_PORT=3000
APP_HOST=0.0.0.0

# Domain and URL Configuration
DOMAIN_NAME=astralcore.app
PRIMARY_URL=https://astralcore.app
API_BASE_URL=https://api.astralcore.app
CDN_BASE_URL=https://cdn.astralcore.app

# Database Configuration (Production - High Availability)
DATABASE_URL=${DATABASE_URL}
DATABASE_HOST=${DATABASE_HOST}
DATABASE_PORT=5432
DATABASE_NAME=astralcore_prod
DATABASE_USERNAME=${DATABASE_USERNAME}
DATABASE_PASSWORD=${DATABASE_PASSWORD}
DATABASE_SSL_MODE=require
DATABASE_POOL_SIZE=20
DATABASE_MAX_CONNECTIONS=100
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_STATEMENT_TIMEOUT=60000
DATABASE_IDLE_TIMEOUT=300000

# Redis Configuration (Production Cluster)
REDIS_URL=${REDIS_URL}
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_CLUSTER_MODE=true
REDIS_TLS_ENABLED=true
REDIS_POOL_SIZE=10
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=3000

# Authentication & Authorization
NEXTAUTH_URL=https://astralcore.app
NEXTAUTH_SECRET=${NEXTAUTH_SECRET}
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d
SESSION_TIMEOUT=3600000
SESSION_MAX_AGE=86400
COOKIE_SECURE=true
COOKIE_SAME_SITE=strict
COOKIE_HTTP_ONLY=true

# Encryption Configuration (HIPAA Compliance)
ENCRYPTION_KEY=${ENCRYPTION_KEY}
FIELD_ENCRYPTION_KEY=${FIELD_ENCRYPTION_KEY}
FIELD_ENCRYPTION_PEPPER=${FIELD_ENCRYPTION_PEPPER}
AUDIT_LOG_KEY=${AUDIT_LOG_KEY}
BACKUP_ENCRYPTION_KEY=${BACKUP_ENCRYPTION_KEY}
ENCRYPTION_ALGORITHM=aes-256-gcm
KEY_ROTATION_INTERVAL=7776000000

# OAuth Providers
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
MICROSOFT_CLIENT_ID=${MICROSOFT_CLIENT_ID}
MICROSOFT_CLIENT_SECRET=${MICROSOFT_CLIENT_SECRET}

# Email Configuration (Production SMTP)
EMAIL_SERVICE=smtp
EMAIL_HOST=${EMAIL_HOST}
EMAIL_PORT=587
EMAIL_USERNAME=${EMAIL_USERNAME}
EMAIL_PASSWORD=${EMAIL_PASSWORD}
EMAIL_FROM=noreply@astralcore.app
EMAIL_REPLY_TO=support@astralcore.app
EMAIL_TLS_ENABLED=true
EMAIL_RATE_LIMIT=100

# SendGrid Configuration (Backup Email Service)
SENDGRID_API_KEY=${SENDGRID_API_KEY}
SENDGRID_FROM_EMAIL=noreply@astralcore.app
SENDGRID_TEMPLATE_ID_WELCOME=${SENDGRID_TEMPLATE_ID_WELCOME}
SENDGRID_TEMPLATE_ID_RESET=${SENDGRID_TEMPLATE_ID_RESET}
SENDGRID_TEMPLATE_ID_CRISIS=${SENDGRID_TEMPLATE_ID_CRISIS}

# AI Services Configuration
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_ORG_ID=${OPENAI_ORG_ID}
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7
OPENAI_RATE_LIMIT=100
OPENAI_TIMEOUT=30000

GEMINI_API_KEY=${GEMINI_API_KEY}
GEMINI_MODEL=gemini-1.5-pro
GEMINI_RATE_LIMIT=60
GEMINI_TIMEOUT=30000

# Crisis Intervention Services
CRISIS_TEXT_LINE_API_KEY=${CRISIS_TEXT_LINE_API_KEY}
CRISIS_HOTLINE_NUMBER=988
NATIONAL_SUICIDE_PREVENTION_LIFELINE=988
CRISIS_CHAT_URL=https://suicidepreventionlifeline.org/chat/
EMERGENCY_SERVICES_NUMBER=911

# Storage Configuration (AWS S3 Production)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_S3_BUCKET_UPLOADS=astralcore-prod-uploads
AWS_S3_BUCKET_BACKUPS=astralcore-prod-backups
AWS_S3_BUCKET_LOGS=astralcore-prod-logs
AWS_S3_ENCRYPTION=AES256
AWS_S3_VERSIONING=true
AWS_CLOUDFRONT_DOMAIN=${AWS_CLOUDFRONT_DOMAIN}

# File Upload Configuration
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,text/plain
UPLOAD_VIRUS_SCANNING=true
UPLOAD_ENCRYPTION=true
UPLOAD_RETENTION_DAYS=2555

# WebSocket Configuration (Socket.IO)
SOCKET_SECRET=${SOCKET_SECRET}
SOCKET_CORS_ORIGIN=https://astralcore.app
SOCKET_RATE_LIMIT=100
SOCKET_CONNECTION_LIMIT=1000
SOCKET_HEARTBEAT_TIMEOUT=60000
SOCKET_HEARTBEAT_INTERVAL=25000

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESS_REQUESTS=true
API_RATE_LIMIT=1000
AUTH_RATE_LIMIT=10
UPLOAD_RATE_LIMIT=5

# Security Configuration
CORS_ORIGIN=https://astralcore.app
HELMET_CSP_ENABLED=true
SECURITY_HEADERS_ENABLED=true
HTTPS_REDIRECT=true
HSTS_MAX_AGE=31536000
XSS_PROTECTION=true
FRAME_OPTIONS=DENY
CONTENT_TYPE_OPTIONS=true
REFERRER_POLICY=strict-origin-when-cross-origin

# Monitoring & Observability
LOG_LEVEL=info
LOG_FORMAT=json
LOG_DESTINATION=file
LOG_FILE_PATH=/var/log/astralcore/app.log
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10
LOG_COMPRESS=true
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=/var/log/astralcore/audit.log
PERFORMANCE_MONITORING=true
ERROR_TRACKING=true

# Metrics & Analytics
PROMETHEUS_METRICS=true
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/metrics
HEALTH_CHECK_ENDPOINT=/api/health
DEEP_HEALTH_CHECKS=true
TELEMETRY_ENABLED=false
ANALYTICS_ENABLED=false

# Feature Flags (Production)
ENABLE_AI_THERAPY=true
ENABLE_CRISIS_DETECTION=true
ENABLE_PEER_SUPPORT=true
ENABLE_PROFESSIONAL_SERVICES=true
ENABLE_OFFLINE_MODE=false
ENABLE_DEVELOPMENT_TOOLS=false
ENABLE_DEBUG_MODE=false
ENABLE_TEST_DATA=false

# HIPAA Compliance Configuration
HIPAA_COMPLIANCE_MODE=true
PHI_ENCRYPTION_REQUIRED=true
AUDIT_ALL_ACCESS=true
DATA_RETENTION_DAYS=2555
AUTOMATIC_LOGOUT_MINUTES=30
PASSWORD_COMPLEXITY_REQUIRED=true
FAILED_LOGIN_ATTEMPTS_MAX=5
ACCOUNT_LOCKOUT_DURATION=1800000
SESSION_ENCRYPTION=true
COOKIE_ENCRYPTION=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true
BACKUP_VERIFICATION=true
CROSS_REGION_BACKUP=true
BACKUP_NOTIFICATION=true

# Cache Configuration
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=100MB
MEMORY_CACHE_SIZE=50MB
REDIS_CACHE_PREFIX=astralcore:prod:

# Performance Configuration
NODE_OPTIONS=--max-old-space-size=4096
UV_THREADPOOL_SIZE=32
WORKER_THREADS=4
CLUSTER_MODE=true
PM2_INSTANCES=max
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# Development Overrides (Disabled in Production)
NEXT_TELEMETRY_DISABLED=1
DISABLE_ESLINT=false
TYPESCRIPT_STRICT_MODE=true
SOURCE_MAPS=false
BUNDLE_ANALYZER=false

# Third-party Service Configuration
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_FROM_NUMBER=${TWILIO_FROM_NUMBER}

# Notification Services
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
TEAMS_WEBHOOK_URL=${TEAMS_WEBHOOK_URL}
DISCORD_WEBHOOK_URL=${DISCORD_WEBHOOK_URL}

# Integration Services
CALENDAR_INTEGRATION=google
CALENDAR_API_KEY=${CALENDAR_API_KEY}
CALENDAR_CLIENT_ID=${CALENDAR_CLIENT_ID}
CALENDAR_CLIENT_SECRET=${CALENDAR_CLIENT_SECRET}

# Compliance Reporting
COMPLIANCE_REPORTING_ENABLED=true
COMPLIANCE_REPORT_SCHEDULE=0 0 1 * *
COMPLIANCE_REPORT_EMAIL=compliance@astralcore.app
HIPAA_BREACH_NOTIFICATION_EMAIL=security@astralcore.app

# Error Handling
ERROR_REPORTING_SERVICE=sentry
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=${APP_VERSION}
SENTRY_SAMPLE_RATE=0.1

# Resource Limits
MAX_MEMORY_USAGE=4GB
MAX_CPU_USAGE=80
MAX_CONCURRENT_REQUESTS=1000
MAX_DATABASE_CONNECTIONS=50
MAX_REDIS_CONNECTIONS=20

# Geographic Configuration
DEFAULT_TIMEZONE=America/New_York
SUPPORTED_LOCALES=en-US,es-ES,fr-FR,de-DE
DEFAULT_LOCALE=en-US
CURRENCY=USD
REGION=US

# Content Security
CONTENT_MODERATION_ENABLED=true
CONTENT_MODERATION_API_KEY=${CONTENT_MODERATION_API_KEY}
SPAM_FILTER_ENABLED=true
PROFANITY_FILTER_ENABLED=true

# Mobile App Configuration
MOBILE_API_VERSION=v1
MOBILE_MIN_VERSION=1.0.0
MOBILE_FORCE_UPDATE=false
MOBILE_DEEP_LINKING_ENABLED=true

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=The AstralCore platform is temporarily under maintenance. Please try again later.
MAINTENANCE_ALLOWED_IPS=

# Legal and Compliance
TERMS_OF_SERVICE_VERSION=2.0
PRIVACY_POLICY_VERSION=2.1
HIPAA_NOTICE_VERSION=1.0
DATA_PROCESSING_AGREEMENT_VERSION=1.0

# API Versioning
API_VERSION=v1
API_DEPRECATION_WARNING=false
API_BACKWARD_COMPATIBILITY=true

# Search Configuration
SEARCH_ENABLED=true
SEARCH_INDEX_NAME=astralcore-prod
ELASTICSEARCH_URL=${ELASTICSEARCH_URL}
ELASTICSEARCH_USERNAME=${ELASTICSEARCH_USERNAME}
ELASTICSEARCH_PASSWORD=${ELASTICSEARCH_PASSWORD}